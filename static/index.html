<!DOCTYPE html><html lang="zh-CN"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>网页爬取工具</title>    <style>        body {            font-family: Arial, sans-serif;            padding: 20px;        }        .form-group {            margin-bottom: 15px;        }        label {            display: block;            margin-bottom: 5px;        }        input[type="text"], select {            width: 100%;            padding: 8px;            box-sizing: border-box;        }        button {            padding: 10px 15px;            margin-top: 10px;            cursor: pointer;        }        ul {            list-style-type: none;            padding: 0;        }        li {            margin-bottom: 10px;        }    </style>    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script></head><body><div id="app">    <h1>网页爬取工具</h1>    <div class="form-group">        <label for="url">URL：</label>        <input type="text" id="url" v-model="formData.url" required>    </div>    <div class="form-group">        <label>请求头：</label>        <div v-for="(header, index) in formData.headers" :key="index">            <input type="text" v-model="header.key" placeholder="键">            <input type="text" v-model="header.value" placeholder="值">            <button @click="removeHeader(index)" v-if="index > 0">移除</button>        </div>        <button @click="addHeader">添加请求头</button>    </div>    <div class="form-group">        <label for="selector">选择器：</label>        <input type="text" id="selector" v-model="selector" placeholder="输入选择器">    </div>    <div class="form-group">        <label for="type">内容类型：</label>        <select id="type" v-model="contentType">            <option value="text">文本</option>            <option value="title">标题</option>            <option value="href">链接</option>        </select>    </div>    <button @click="validateSelector">验证选择器</button>    <button @click="startScraping">开始爬取</button>    <div id="result" v-if="showResult">        <h2>爬取结果：</h2>        <ul>            <li v-for="(item, index) in scrapedData" :key="index">                <template v-if="contentType === 'text'">                    <strong>文本:</strong> {{ item }}                </template>                <template v-else-if="contentType === 'title'">                    <strong>标题:</strong> {{ item }}                </template>                <template v-else-if="contentType === 'href'">                    <strong>链接:</strong> {{ item }}                </template>            </li>        </ul>        <button @click="saveLocally">保存到本地</button>    </div>    <div v-if="error">        <p>错误：{{ error }}</p>    </div></div><script>    new Vue({        el: '#app',        data: {            formData: {                url: '',                headers: [                    { key: 'User-Agent', value: '' }                ]            },            selector: '',            contentType: 'text',            scrapedData: [],            showResult: false,            error: ''        },        methods: {            addHeader() {                this.formData.headers.push({ key: '', value: '' });            },            removeHeader(index) {                this.formData.headers.splice(index, 1);            },            validateSelector() {                fetch('http://localhost:8080/validateSelector', {                    method: 'POST',                    headers: {                        'Content-Type': 'application/json'                    },                    body: JSON.stringify({                        url: this.formData.url,                        headers: this.formData.headers.reduce((obj, item) => (obj[item.key] = item.value, obj), {}),                        selector: this.selector,                        contentType: this.contentType                    })                })                    .then(response => response.json())                    .then(data => {                        if (data.success) {                            alert('选择器验证成功！可以开始爬取数据。');                        } else {                            this.error = '选择器验证失败，请检查选择器是否正确。';                        }                    })                    .catch(error => {                        console.error('Error:', error);                        this.error = '网络错误，请重试。';                    });            },            startScraping() {                fetch('http://localhost:8080/scrape', {                    method: 'POST',                    headers: {                        'Content-Type': 'application/json'                    },                    body: JSON.stringify({                        url: this.formData.url,                        headers: this.formData.headers.reduce((obj, item) => (obj[item.key] = item.value, obj), {}),                        selector: this.selector,                        contentType: this.contentType                    })                })                    .then(response => response.json())                    .then(data => {                        this.scrapedData = data.data;                        this.showResult = true;                    })                    .catch(error => {                        console.error('Error:', error);                        this.error = '网络错误，请重试。';                    });            },            saveLocally() {                const blob = new Blob([JSON.stringify(this.scrapedData, null, 2)], { type: 'application/json' });                const url = URL.createObjectURL(blob);                const a = document.createElement('a');                a.href = url;                a.download = 'scrapedData.json';                a.click();                URL.revokeObjectURL(url);            }        }    });</script></body></html>