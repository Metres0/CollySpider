<!DOCTYPE html><html lang="zh-CN"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>网页抓取工具</title>    <style>        body {            font-family: Arial, sans-serif;            background-color: #f0f0f0;            margin: 0;            padding: 0;            display: flex;            justify-content: center;            align-items: center;            height: 100vh;        }        .container {            width: 800px;            padding: 20px;            background-color: #fff;            border-radius: 8px;            box-shadow: 0 0 10px rgba(0,0,0,0.1);        }        .form-group {            margin-bottom: 15px;        }        label {            font-weight: bold;        }        input, select, textarea {            width: 100%;            padding: 10px;            font-size: 16px;            border: 1px solid #ccc;            border-radius: 4px;            box-sizing: border-box;        }        select[multiple] {            height: 100px;        }        button {            background-color: #4CAF50;            color: white;            border: none;            padding: 12px 24px;            margin-top: 10px;            cursor: pointer;            border-radius: 4px;            font-size: 16px;        }        button:hover {            background-color: #45a049;        }        .data-container {            margin-top: 20px;            border: 1px solid #ccc;            border-radius: 4px;            padding: 15px;            background-color: #f9f9f9;            overflow-y: scroll;            max-height: 400px;        }        .data-item {            margin-bottom: 10px;        }        .data-item strong {            display: block;            margin-bottom: 5px;        }        .next-page-button {            margin-top: 10px;        }    </style></head><body><div class="container">    <h1 style="text-align: center;">网页抓取工具</h1>    <div class="form-group">        <label for="url">URL:</label>        <input type="text" id="url" value="https://example.com" placeholder="输入网址">    </div>    <div class="form-group">        <label for="headers">请求头 (键:值):</label>        <textarea id="headers" placeholder="例如，User-Agent:Mozilla/5.0"></textarea>    </div>    <div class="form-group">        <label for="selector">选择器:</label>        <input type="text" id="selector" placeholder="输入 CSS 选择器">    </div>    <div class="form-group">        <label for="dataTypes">数据类型:</label>        <select id="dataTypes" multiple>            <option value="text">文本</option>            <option value="title">标题</option>            <option value="link">链接</option>            <!-- 可根据需求添加更多选项 -->        </select>    </div>    <div class="form-group">        <label for="nextPageUrl">下一页 URL:</label>        <input type="text" id="nextPageUrl" placeholder="可选">    </div>    <button onclick="validateSelector()">验证选择器</button>    <button onclick="scrapeData()">抓取数据</button>    <div class="data-container" id="data-container"></div></div><script>    function validateSelector() {        const url = document.getElementById('url').value;        const headers = parseKeyValuePairs(document.getElementById('headers').value);        const selector = document.getElementById('selector').value;        const dataTypes = Array.from(document.getElementById('dataTypes').selectedOptions, option => option.value);        const nextPageUrl = document.getElementById('nextPageUrl').value;        const requestData = {            url: url,            headers: headers,            selector: selector,            dataTypes: dataTypes,            nextPageUrl: nextPageUrl        };        fetch('/validateSelector', {            method: 'POST',            headers: {                'Content-Type': 'application/json'            },            body: JSON.stringify(requestData)        })            .then(response => response.json())            .then(data => {                if (data.success) {                    alert('选择器验证成功！可选的数据类型包括：' + data.dataTypes.join(', '));                    console.log('可选的数据类型:', data.dataTypes);                } else {                    alert('验证失败：' + data.error);                }            })            .catch(error => {                console.error('错误:', error);                alert('验证选择器时发生错误。');            });    }    function scrapeData() {        const url = document.getElementById('url').value;        const headers = parseKeyValuePairs(document.getElementById('headers').value);        const selector = document.getElementById('selector').value;        const dataTypes = Array.from(document.getElementById('dataTypes').selectedOptions, option => option.value);        const nextPageUrl = document.getElementById('nextPageUrl').value;        const requestData = {            url: url,            headers: headers,            selector: selector,            dataTypes: dataTypes,            nextPageUrl: nextPageUrl        };        fetch('/scrape', {            method: 'POST',            headers: {                'Content-Type': 'application/json'            },            body: JSON.stringify(requestData)        })            .then(response => response.json())            .then(data => {                displayScrapedData(data);            })            .catch(error => {                console.error('错误:', error);                alert('抓取数据时发生错误。');            });    }    function displayScrapedData(data) {        const dataContainer = document.getElementById('data-container');        dataContainer.innerHTML = '';        if (data.data.length === 0) {            dataContainer.innerHTML = '<p>未找到数据。</p>';            return;        }        data.data.forEach(item => {            const div = document.createElement('div');            div.classList.add('data-item');            div.innerHTML = `<strong>${item.type}:</strong> ${item.content}`;            dataContainer.appendChild(div);        });        if (data.nextPageUrl) {            const nextPageButton = document.createElement('button');            nextPageButton.textContent = '下一页';            nextPageButton.classList.add('next-page-button');            nextPageButton.onclick = () => {                document.getElementById('nextPageUrl').value = data.nextPageUrl;                scrapeData();            };            dataContainer.appendChild(nextPageButton);        }    }    function parseKeyValuePairs(input) {        const headers = {};        const lines = input.split('\n');        lines.forEach(line => {            const parts = line.split(':');            if (parts.length === 2) {                const key = parts[0].trim();                const value = parts[1].trim();                headers[key] = value;            }        });        return headers;    }</script></body></html>